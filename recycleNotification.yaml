blueprint:
  name: Recycle Reminder
  description: Sends a notification at a specific time if the value of the selected entity matches tomorrow's date.
  domain: automation
  input:
    entity:
      name: Entity
      description: The entity to check (must return a date in 'YYYY-MM-DD' format).
      selector:
        entity:
          domain: sensor
    time:
      name: Notification Time
      description: The time to trigger the notification.
      selector:
        time: {}
    devices:
      name: Devices to Notify
      description: Select one or more devices to send the notification to.
      selector:
        target:
          entity:
            domain: notify
    notification_title:
      name: Notification Title
      description: Title for the notification.
      default: Recycle Reminder
      selector:
        text:
          multiline: false
    notification_message:
      name: Notification Message
      description: >
        Message for the notification. Include a reminder such as "Take out the 
        recycling."
      default: Remember to take out the recycling!
      selector:
        text:
          multiline: true

trigger:
  - platform: time
    at: !input time

condition:
  - condition: template
    value_template: >
      {{ states(input.entity) == (now().date() + timedelta(days=1)).strftime('%Y-%m-%d') }}

action:
  - service: notify
    target: !input devices
    data:
      title: !input notification_title
      message: !input notification_message
mode: single
